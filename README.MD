# carrier-firmware

Программы "прошивки" для контроллеров БКТ различной карьерной техники. Для прошивок определены следующие названия:

* aux -- вспомогательная техника, например, бульдозера (auxiliaries)
* dmp -- самосвалы (dump trucks)
* ful -- автозаправщики (fuelers)
* shv -- экскаваторы (shovels)

Контроллер БКТ является устройством сбора телеметрической информации на основе процессора TI AM335x Sitara (armv7l).

В основе проекта находится Qt5.

## Структура проекта

В качестве основы программной архитектуры проекта используется принцип "портов и адаптеров" ([подробнее](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)).

Каждая конкретная прошивка (aux, dmp, etc.) формирует вертикальный разрез и является полностью абстрагированной от любой другой ([подробнее](https://jimmybogard.com/vertical-slice-architecture/)).

### 0 `run` -- входные точки программ (composition roots)

Проекты данного уровня осуществляют инициализацию компонентов и настройку интеграций между ними. Являются входными точками для исполнения программ прошивок.

### 1.1 `inter` -- первичные адаптеры (UI, CLI, etc.)

`aux_view` -- 

### 1.2 `infra` -- вторичные адаптеры, инфраструктура (Caching, Networking, Sensors, etc.)

`sensors` --

### 2 `app` -- прикладные сервисы

На данном уровне осуществляется прикладная логика прошивки.

`generic` -- 

`dmp_srv` --

`shv_srv` -- 

`sensors` -- содержит контракты для подключения инфраструктурных адаптеров.

### `_utils` -- вспомогательные компоненты (utils, helpers, cross-cutting, etc.)

## Сторонние библиотеки

`plog` -- 

`QDeferred` -- 

## Сборка проекта

Debug-сборка проекта происходит по средствам кросс-компиляции.

### Windows

Наиболее просто способ вести работу над проектом не из под Linux возможно вести на Windows 10/11. Для это необходимо включить модуль WSL2 и установить подходящий дистрибутив (например, Ubuntu 20.04 из Windows Store). Для запуска `QtCreator`  потребуется gWSL.

## Дополнительные материалы

[Processor SDK Linux for AM335X](http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/devices/AM335X/linux/index.html)